# UserService

## Description

This service is responsible for handling all user provided data. This data is split into: Users, Organisations, Projects, and Microservice.

## Data

### Users

The users of the system are stored with the following data:

- userId (generated by this service when a new users is created)
- userName
- password

### Organisations

The users of the system can create organisation to organise their work and work with other users.
Organisations are stored with the following data:

- organisationId (generated by this service when a new organisations is created)
- organisationName

### Invites

As users can invite other users to an organisation, they need to accept/decline that invite.
Invites are stored with the following data:

- senderId
- receiverId
- organisationId

When an invitation is accepted or declined it is removed, and if accepted the permissions for that organisation will be updated with the new user.

### Projects

Under each organisation there can be any number of projects, these are the collection of microservice and are equivalent to a system
Projects are stored with the following data:

- projectId (generated by this service when a new project is created)
- projectName
- organisationId (relates to the organisation this project is created under)

### Microservices

Each project can contain any number of microservices. There are the unit that the users are designing.
Microservices are stored with the following data:

- microserviceId (generated by this service when a new microservice is created)
- microserviceName
- microserviceFile (the entire design file)
- projectId (relates to the project this microservice is created under)


## Endpoints

All endpoints are under "/api/v1"

Protected endpoints are under "/protected". Ex: "/api/v1/protected/user/:userId".
All protected endpoints requires a token and userId in the header under "Token" and "UserId" respectively.
The token and userId is validated by middleware, that calls the AuthService.

### /user

Unprotected

Method | Path | Body | Description
--- | --- | --- | ---
POST | /login | userName, password | Logs in a user. Will generate a new token if login is successful.
POST | | userName, password | Creates a new user in the system. Will generate and return a new token and userId if successful.

Protected

Method | Path | Body | Description
--- | --- | --- | ---
GET | | | Finds a user with the given userId. Will return the public user information if successful.
PUT | | username, password | Updates a user with the given userId.
DELETE | | | Delete a user with the given userId.
GET | /organisations | | Finds all the organisations that the given user has permissions to access.


### /invite

Protected

Method | Path | Body | Description
--- | --- | --- | ---
GET | | | Finds all the invitations for the user with the given userId.
POST | | senderId, receiverId, organisationId | Creates a new invitation.
POST | /response | senderId, receiverId, organisationId, accepted | Accepts/Declines an invitation.
DELETE | | | Deletes the invitation with the given inviteId.


### /organisation

Protected

Method | Path | Body | Description
--- | --- | --- | ---
GET | /:organisationId | | Finds an organisation with the given organisationId.
POST | | userId, organisationName | Creates a new organisation and adds the user as owner of the organisation.
PUT | /:organisationId | organisationName | Updates the organisation with the given organisationId.
DELETE | /:organisationId | | Deletes the organisation with the given organisationId

### /project

Protected

Method | Path | Body | Description
--- | --- | --- | ---
GET | /:projectId | | Finds an project with the given projectId.
POST | | userId, organisationId, projectName | Creates a new project and adds the user as owner of the project.
PUT | /:projectId | projectName | Updates the project with the given projectId.
DELETE | /:projectId | | Deletes the project with the given projectId

### /microservice

Protected

Method | Path | Body | Description
--- | --- | --- | ---
GET | /:microserviceId | | Finds an microservice with the given microserviceId.
POST | | userId, projectId, microserviceName | Creates a new microservice and adds the user as owner of the project.
PUT | /:microserviceId | projectName | Updates the microservice with the given microserviceId.
DELETE | /:microserviceId | | Deletes the microservice with the given microserviceId